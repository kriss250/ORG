<?php $__env->startSection("contents"); ?>

<?php

$cash=0;
$check=0;
$bank=0;
$cc = 0;
$i=1;

$totals = ["cash"=>0,"bank"=>0,"cc"=>0,"check"=>0];
?>
<div class="page-contents">

    <div class="report-filter">
        <table style="width:100%">
            <tr>
                <td>
                    <h3>F.O Payments</h3>
                </td>
                <td>
                    <form style="float:right" action="" class="form-inline" method="get">
                        <label>Date</label>
                        <input name="startdate" type="text" value="<?php echo e(\ORG\Dates::$RESTODATE); ?>" class="date-picker form-control" />
                        -
                        <input name="enddate" type="text" value="<?php echo e(\ORG\Dates::$RESTODATE); ?>" class="date-picker form-control" />

                        <?php if(isset($_GET['import'])): ?>
                        <input type="hidden" name="import" value="" />
                        <?php endif; ?>

                        <input type="submit" class="btn btn-success btn-sm" value="Go" />
                        <button type="button" data-dates="<?php echo e(isset($_GET['startdate']) ? $_GET['startdate'] : date('d/m/Y',strtotime(\ORG\Dates::$RESTODT))); ?> - <?php echo e(isset($_GET['startdate']) ? $_GET['startdate'] : date('d/m/Y',strtotime(\ORG\Dates::$RESTODT))); ?>" data-title="F.O Payments" class="btn btn-default report-print-btn">Print</button>
                    </form>
                </td>
            </tr>

            <tr>
                <td>
                    <p class="text-danger">
                        <b>Date : <?php echo e(isset($_GET['startdate']) && isset($_GET['enddate'])  ?  \App\FX::Date($_GET['startdate'])." - ".\App\FX::Date($_GET['enddate']) : \App\FX::Date(\ORG\Dates::$RESTODATE)); ?></b>
                    </p>
                </td>
            </tr>

        </table>
    </div>

    <table class="table table-bordered">
        <thead>
            <tr>
                <th>#</th>
                <th>Guest</th>
                <th>Company</th>
                <th>Room</th>
                <th>Cash</th>
                <th>CC</th>
                <th>Check</th>
                <th>Bank T.</th>
                <th>Comment</th>
                <th>User</th>
                <th>Date</th>
            </tr>
        </thead>
        
        <?php foreach($data as $pay): ?>
        <?php
        switch(strtolower($pay->method_name)){
            case "cash" : 
                $cash = $pay->credit;
                $cc = 0;
                $bank = 0;
                $check = 0;
                $totals["cash"] +=$pay->credit;
                break;
            case "credit card" :
                $cash = 0;
                $cc = $pay->credit;
                $bank = 0;
                $check = 0;
                $totals["cc"] +=$pay->credit;
                break;
            case "check":
                $cash = 0;
                $cc = 0;
                $bank = 0;
                $check = $pay->credit;
                $totals["check"] +=$pay->credit;
                break;
            case "bank op" : 
                $cash = 0;
                $cc = 0;
                $bank = $pay->credit;
                $check = 0;
                $totals["bank"] +=$pay->credit;
                break;
        }


        ?>
            <tr>
                <td><?php echo e($i); ?></td>
                <td><?php echo e($pay->guest); ?></td>
                <td><?php echo e($pay->company); ?></td>
                <td><?php echo e($pay->room_number); ?></td>
                <td><?php echo e($cash); ?></td>
                <td><?php echo e($cc); ?></td>
                <td><?php echo e($check); ?></td>
                <td><?php echo e($bank); ?></td>
                <td><?php echo e($pay->comment); ?></td>
                <td><?php echo e($pay->username); ?></td>
                <td><?php echo e($pay->date); ?></td>
            </tr>
        <?php $i++; ?>
        <?php endforeach; ?>
   
        <tfoot>
            <tr>
                <th colspan="4">Total</th>
                <th><?php echo e(number_format($totals['cash'])); ?></th>
                <th><?php echo e(number_format($totals['cc'])); ?></th>
                <th><?php echo e(number_format($totals['check'])); ?></th>
                <th><?php echo e(number_format($totals['bank'])); ?></th>
                <th class="text-red text-right"><b style="color:darkred">Grand Total:</b></th>
                <th class="text-right" colspan="2">
                    <b style="font-size:13px"><?php echo e(number_format($totals['cash']+$totals['cc']+$totals['bank']+$totals['check'])); ?></b>
                </th>
            </tr>
        </tfoot>
    </table>


    <div class="text-center print-footer">
        <table style="margin-bottom:85px;width:100%;" class="table">
            <tr>
                <td>
                    Cashier
                </td>

                <td>
                    CONTROLLER
                </td>

                <td>
                    ACCOUNTANT
                </td>

                <td>
                    DAF
                </td>

                <td>
                    G. MANAGER
                </td>
            </tr>
        </table>
        <div class="clearfix"></div>
    </div>

</div>

<?php $__env->stopSection(); ?>


<?php echo $__env->make(isset($_GET['import']) ? "ORGFrontdesk.Reports.Master" : "Backoffice.Master", array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>